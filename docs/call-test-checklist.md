# 🧪 VTX AI Phone System - 实际通话测试清单

## 📋 测试准备

### ✅ 预备条件确认
- [ ] 所有API密钥已配置并验证通过
- [ ] 系统环境检查完成
- [ ] 网络连接正常
- [ ] 101分机配置正确

## 🎯 核心功能测试

### 1️⃣ 系统启动测试
**目标**: 验证系统能正常启动和注册
- [ ] Python进程启动无错误
- [ ] SIP注册成功 (看到"✅ 注册成功"信息)
- [ ] AI组件初始化完成
- [ ] 系统进入等待状态

**预期日志**:
```
✅ 增强AI组件初始化完成
✅ SIP 客户端启动成功
📞 等待来电: 14088779998
🤖 AI模式: 增强版（Deepgram + ElevenLabs）
```

### 2️⃣ 来电接听测试
**目标**: 验证能正常接听电话
- [ ] 拨打DID号码: `14088779998`
- [ ] 系统显示来电信息
- [ ] SDP协商成功
- [ ] RTP连接建立

**预期日志**:
```
📞 来电: [call-id]
   来电号码: [your-number]
   远程 RTP: [ip]:[port]
   编解码器: 0, 8
```

### 3️⃣ 音频播放测试
**目标**: 验证音频能正常播放
- [ ] 听到增强欢迎语播放
- [ ] 音质清晰，无杂音
- [ ] 延迟可接受 (<3秒)
- [ ] 音量适中

**预期体验**:
- 听到："您好，我是增强版AI助手，搭载了最新的语音识别和合成技术。请问有什么可以帮助您的？"

### 4️⃣ 语音识别测试
**目标**: 验证能正常识别语音
- [ ] 说话后系统有反应
- [ ] 识别结果显示在日志中
- [ ] 中文识别准确
- [ ] 延迟可接受 (<2秒)

**测试语句**:
- "你好"
- "现在几点了"
- "天气怎么样"

**预期日志**:
```
👤 用户说（中间）: 你好
👤 用户说（最终）: 你好
```

### 5️⃣ AI回复测试
**目标**: 验证AI能正常回复
- [ ] 识别后生成回复
- [ ] 回复语音播放
- [ ] 回复内容合理
- [ ] 整体延迟 <3秒

**预期日志**:
```
🤖 AI 回复: 我听到您说：你好。这是一个测试回复。
🔊 音频合成完成: [size] 字节
```

## 📊 性能评估

### ⏱️ 延迟测试
**目标**: 验证整体性能符合要求
- [ ] 接听延迟: <2秒
- [ ] 欢迎语延迟: <3秒  
- [ ] 语音识别延迟: <2秒
- [ ] AI回复延迟: <3秒
- [ ] 总响应时间: <8秒

### 🔊 音质测试
**目标**: 验证音频质量
- [ ] 播放音质清晰
- [ ] 无明显杂音
- [ ] 音量适中
- [ ] 语速正常

### 🔄 稳定性测试
**目标**: 验证系统稳定性
- [ ] 多轮对话正常
- [ ] 连续通话无问题
- [ ] 系统资源占用正常
- [ ] 无内存泄漏

## 🚨 问题诊断

### ❌ 常见问题及解决方案

**问题1: 系统启动失败**
- 检查API密钥配置
- 检查网络连接
- 查看错误日志

**问题2: 无法接听电话**  
- 检查SIP注册状态
- 检查网络端口开放
- 验证分机配置

**问题3: 无声音播放**
- 检查ElevenLabs连接
- 检查音频格式转换
- 验证RTP连接

**问题4: 语音识别不工作**
- 检查Deepgram连接
- 检查音频输入格式
- 验证WebSocket连接

**问题5: AI回复异常**
- 检查OpenAI连接
- 查看LLM处理日志
- 验证回调链路

## ✅ 测试通过标准

### 🎯 最低要求
- [ ] 能成功接听电话
- [ ] 能播放欢迎语
- [ ] 能识别简单语音
- [ ] 延迟在可接受范围内

### 🏆 理想目标
- [ ] 所有功能完美工作
- [ ] 延迟符合目标要求
- [ ] 音质达到生产级别
- [ ] 稳定性表现良好

## 📝 测试记录

### 测试环境
- **日期**: ___________
- **测试人**: ___________
- **系统版本**: v2.0 Enhanced
- **网络环境**: ___________

### 测试结果
- **总体评分**: ___/10
- **核心功能**: ✅/❌
- **性能表现**: ___/10  
- **音质评分**: ___/10
- **稳定性**: ✅/❌

### 问题记录
- **发现问题**: ___________
- **解决方案**: ___________
- **改进建议**: ___________

---

**测试完成后，根据结果决定是否进入Phase 3开发！** 🚀 